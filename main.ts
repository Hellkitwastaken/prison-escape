function Startlvl () {
    if (Currentlvl == 1) {
        tiles.setCurrentTilemap(tilemap`level2`)
        prisoner.setPosition(0, 50)
        Security = sprites.create(img`
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ........................2222222222222...........................
            ......................22222222222222222.........................
            ....................222222222222222222222.......................
            ...................22222222222222222222222......................
            ..................2222222222222222222222222.....................
            .................222222222222222222222222222....................
            ................22222222222222222222222222222...................
            ...............2222222222444444444442222222222..................
            ..............222222222244444444444442222222222.................
            ..............222222224444444444444444422222222.................
            .............22222222444444444444444444422222222................
            .............22222222444444555555544444422222222................
            ............2222222244444555555555554444422222222...............
            ............2222222444445555555555555444442222222...............
            ............2222222444445555555555555444442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444445555555555555444442222222...............
            ............2222222444445555555555555444442222222...............
            ............2222222244444555555555554444422222222...............
            .............22222222444444555555544444422222222................
            .............22222222444444444444444444422222222................
            ..............222222224444444444444444422222222.................
            ..............222222222244444444444442222222222.................
            ...............2222222222444444444442222222222..................
            ................22222222222222222222222222222...................
            .................222222222222222222222222222....................
            ..................2222222222222222222222222.....................
            ...................22222222222222222222222......................
            ....................222222222222222222222.......................
            ......................22222222222222222.........................
            ........................2222222222222...........................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            `, SpriteKind.Player)
        Security.setPosition(81, 50)
        Security2 = sprites.create(img`
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ........................2222222222222...........................
            ......................22222222222222222.........................
            ....................222222222222222222222.......................
            ...................22222222222222222222222......................
            ..................2222222222222222222222222.....................
            .................222222222222222222222222222....................
            ................22222222222222222222222222222...................
            ...............2222222222444444444442222222222..................
            ..............222222222244444444444442222222222.................
            ..............222222224444444444444444422222222.................
            .............22222222444444444444444444422222222................
            .............22222222444444555555544444422222222................
            ............2222222244444555555555554444422222222...............
            ............2222222444445555555555555444442222222...............
            ............2222222444445555555555555444442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444455555555555555544442222222...............
            ............2222222444445555555555555444442222222...............
            ............2222222444445555555555555444442222222...............
            ............2222222244444555555555554444422222222...............
            .............22222222444444555555544444422222222................
            .............22222222444444444444444444422222222................
            ..............222222224444444444444444422222222.................
            ..............222222222244444444444442222222222.................
            ...............2222222222444444444442222222222..................
            ................22222222222222222222222222222...................
            .................222222222222222222222222222....................
            ..................2222222222222222222222222.....................
            ...................22222222222222222222222......................
            ....................222222222222222222222.......................
            ......................22222222222222222.........................
            ........................2222222222222...........................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            ................................................................
            `, SpriteKind.Player)
        Security2.setPosition(148, 50)
        Security2.setKind(SpriteKind.Projectile)
        Security.setKind(SpriteKind.Projectile)
    }
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    animation.runImageAnimation(
    prisoner,
    [img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `],
    500,
    false
    )
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    prisoner.setImage(img`
        .........................
        .........................
        ..........111111.........
        ........111111111........
        .......11111111111.......
        .......ffffff111111......
        ......ffffffff11111......
        ......f1fff1fff1111......
        ......fffffffff1111......
        ......ffffffff11111......
        ......111111111111.......
        .......1111111111........
        .......c66666668d........
        ......cc66666668cd.......
        .....ccc66966668ccd......
        .....ccc96696668ccc......
        .....ccc66966668ccc......
        ........88888888.........
        ........ccc..ccd.........
        ........ccc..ccd.........
        .........................
        .........................
        .........................
        .........................
        .........................
        `)
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    prisoner.setImage(img`
        .........................
        .........................
        .........111111..........
        ........111111111........
        .......11111111111.......
        ......111111ffffff.......
        ......11111ffffffff......
        ......1111fff1fff1f......
        ......1111fffffffff......
        ......11111ffffffff......
        .......111111111111......
        ........1111111111.......
        ........d86666666c.......
        .......dc86666666cc......
        ......dcc86666966ccc.....
        ......ccc86669669ccc.....
        ......ccc86666966ccc.....
        .........88888888........
        .........dcc..ccc........
        .........dcc..ccc........
        .........................
        .........................
        .........................
        .........................
        .........................
        `)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    if (invincibility == 0) {
        invincibility = 1
        info.changeLifeBy(-1)
        for (let index = 0; index < 4; index++) {
            prisoner.setFlag(SpriteFlag.Invisible, true)
            pause(100)
            prisoner.setFlag(SpriteFlag.Invisible, false)
            pause(100)
        }
    }
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.floorLight2, function (sprite, location) {
    Currentlvl += 1
    Startlvl()
})
let Security2: Sprite = null
let Security: Sprite = null
let Currentlvl = 0
let invincibility = 0
let prisoner: Sprite = null
tiles.setCurrentTilemap(tilemap`level1`)
prisoner = sprites.create(img`
    .........................
    .........................
    .........111111..........
    ........111111111........
    .......11111111111.......
    ......111111ffffff.......
    ......11111ffffffff......
    ......1111fff1fff1f......
    ......1111fffffffff......
    ......11111ffffffff......
    .......111111111111......
    ........1111111111.......
    ........d86666666c.......
    .......dc86666666cc......
    ......dcc86666966ccc.....
    ......ccc86669669ccc.....
    ......ccc86666966ccc.....
    .........88888888........
    .........dcc..ccc........
    .........dcc..ccc........
    .........................
    .........................
    .........................
    .........................
    .........................
    `, SpriteKind.Player)
scene.cameraFollowSprite(prisoner)
controller.moveSprite(prisoner)
info.setLife(3)
invincibility = 0
forever(function () {
    animation.runImageAnimation(
    prisoner,
    [img`
        .........................
        .........................
        .........................
        .........................
        .........111111..........
        ........111111111........
        .......11111111111.......
        ......111111ffffff.......
        ......11111ffffffff......
        ......1111fff1fff1f......
        ......1111fffffffff......
        ......11111ffffffff......
        .......111111111111......
        ........1111111111.......
        ........d86666666c.......
        .......dc86666666cc......
        ......dcc86666966ccc.....
        ......ccc86669669ccc.....
        ......ccc86666966ccc.....
        .........88888888........
        .........dcc..ccc........
        .........dcc..ccc........
        .........................
        .........................
        .........................
        `],
    500,
    false
    )
})
forever(function () {
    if (Currentlvl == 1) {
        for (let index = 0; index < 15; index++) {
            pause(50)
            Security.y += 5
        }
        for (let index = 0; index < 15; index++) {
            pause(50)
            Security.y += -5
        }
    }
})
forever(function () {
    if (Currentlvl == 1) {
        for (let index = 0; index < 15; index++) {
            pause(50)
            Security2.y += 8
        }
        for (let index = 0; index < 15; index++) {
            pause(50)
            Security2.y += -8
        }
    }
})
